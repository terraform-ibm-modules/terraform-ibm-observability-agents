{
  "path": ".",
  "variables": {
    "cluster_id": {
      "name": "cluster_id",
      "type": "string",
      "description": "Cluster id to add to agents to",
      "required": true,
      "source": [
        "data.ibm_container_cluster_config.cluster_config.cluster_name_id",
        "data.ibm_container_vpc_cluster.cluster.name"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 5
      },
      "cloud_data_type": "cluster",
      "cloud_data_range": [
        "resolved_to:id"
      ]
    },
    "cluster_resource_group_id": {
      "name": "cluster_resource_group_id",
      "type": "string",
      "description": "Resource group of the cluster",
      "required": true,
      "source": [
        "data.ibm_container_cluster_config.cluster_config.resource_group_id",
        "data.ibm_container_vpc_cluster.cluster.resource_group_id"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 10
      },
      "cloud_data_type": "resource_group",
      "computed": true
    },
    "log_analysis_add_cluster_name": {
      "name": "log_analysis_add_cluster_name",
      "type": "bool",
      "description": "If true, configure the log analysis agent to attach a tag containing the cluster name to all log messages.",
      "default": true,
      "pos": {
        "filename": "variables.tf",
        "line": 56
      }
    },
    "log_analysis_agent_tags": {
      "name": "log_analysis_agent_tags",
      "type": "list(string)",
      "description": "array of tags to group the host logs pushed by the log analysis agent",
      "default": [],
      "pos": {
        "filename": "variables.tf",
        "line": 42
      }
    },
    "log_analysis_agent_version": {
      "name": "log_analysis_agent_version",
      "type": "string",
      "description": "Version of the agent to deploy. To lookup version run: `ibmcloud cr images --restrict ext/logdna-agent`. If null, the default value is used.",
      "default": "3.8.9-20231013.519bb7ae64d91f1f",
      "pos": {
        "filename": "variables.tf",
        "line": 34
      }
    },
    "log_analysis_enabled": {
      "name": "log_analysis_enabled",
      "type": "bool",
      "description": "Deploy IBM Cloud Logging agent",
      "default": true,
      "source": [
        "data.ibm_resource_instance.log_analysis_instance.count",
        "helm_release.log_analysis_agent.count"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 15
      }
    },
    "log_analysis_ingestion_key": {
      "name": "log_analysis_ingestion_key",
      "type": "string",
      "description": "Ingestion key for the IBM Cloud Logging agent to communicate with the instance",
      "sensitive": true,
      "source": [
        "data.ibm_resource_instance.log_analysis_instance.depends_on"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 49
      }
    },
    "log_analysis_instance_name": {
      "name": "log_analysis_instance_name",
      "type": "string",
      "description": "IBM Cloud Logging instance to use. Required if Log Analysis is enabled",
      "required": true,
      "source": [
        "data.ibm_resource_instance.log_analysis_instance.name"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 21
      }
    },
    "log_analysis_resource_group_id": {
      "name": "log_analysis_resource_group_id",
      "type": "string",
      "description": "Resource group the IBM Cloud Logging instance is in. Defaults to Clusters group",
      "pos": {
        "filename": "variables.tf",
        "line": 28
      }
    },
    "cloud_monitoring_access_key": {
      "name": "cloud_monitoring_access_key",
      "type": "string",
      "description": "Access key used by the IBM Cloud Monitoring agent to communicate with the instance",
      "sensitive": true,
      "source": [
        "data.ibm_resource_instance.cloud_monitoring_instance.depends_on"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 88
      }
    },
    "cloud_monitoring_agent_version": {
      "name": "cloud_monitoring_agent_version",
      "type": "string",
      "description": "IBM Cloud Monitoring Agent Version. To lookup version run: `ibmcloud cr images --restrict ext/sysdig/agent`. If null, the default value is used.",
      "default": "12.16.3",
      "pos": {
        "filename": "variables.tf",
        "line": 80
      }
    },
    "cloud_monitoring_enabled": {
      "name": "cloud_monitoring_enabled",
      "type": "bool",
      "description": "Deploy IBM Cloud Monitoring agent",
      "default": true,
      "source": [
        "data.ibm_resource_instance.cloud_monitoring_instance.count",
        "helm_release.cloud_monitoring_agent.count"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 62
      }
    },
    "cloud_monitoring_instance_name": {
      "name": "cloud_monitoring_instance_name",
      "type": "string",
      "description": "The name of the IBM Cloud Monitoring instance to use. Required if Cloud Monitoring is enabled",
      "required": true,
      "source": [
        "data.ibm_resource_instance.cloud_monitoring_instance.name"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 68
      }
    },
    "cloud_monitoring_metrics_filter": {
      "name": "cloud_monitoring_metrics_filter",
      "type": "list(object({\n    type = string\n    name = string\n  }))",
      "description": "To filter custom metrics, specify the Cloud Monitoring metrics to include or to exclude. See  https://cloud.ibm.com/docs/monitoring?topic=monitoring-change_kube_agent#change_kube_agent_inc_exc_metrics.",
      "default": [],
      "source": [
        "helm_release.cloud_monitoring_agent.values"
      ],
      "pos": {
        "filename": "variables.tf",
        "line": 95
      }
    },
    "cloud_monitoring_resource_group_id": {
      "name": "cloud_monitoring_resource_group_id",
      "type": "string",
      "description": "Resource group that the IBM Cloud Monitoring is in. Defaults to Clusters group",
      "pos": {
        "filename": "variables.tf",
        "line": 74
      }
    }
  },
  "outputs": {},
  "required_core": [
    "\u003e= 1.1.0, \u003c1.6.0"
  ],
  "required_providers": {
    "helm": {
      "source": "hashicorp/helm",
      "version_constraints": [
        "\u003e= 2.8.0"
      ]
    },
    "ibm": {
      "source": "ibm-cloud/ibm",
      "version_constraints": [
        "\u003e= 1.49.0"
      ]
    }
  },
  "managed_resources": {
    "helm_release.log_analysis_agent": {
      "mode": "managed",
      "type": "helm_release",
      "name": "log_analysis_agent",
      "attributes": {
        "count": "log_analysis_enabled"
      },
      "provider": {
        "name": "helm"
      },
      "pos": {
        "filename": "main.tf",
        "line": 68
      }
    },
    "helm_release.cloud_monitoring_agent": {
      "mode": "managed",
      "type": "helm_release",
      "name": "cloud_monitoring_agent",
      "attributes": {
        "count": "cloud_monitoring_enabled",
        "values": "cloud_monitoring_metrics_filter"
      },
      "provider": {
        "name": "helm"
      },
      "pos": {
        "filename": "main.tf",
        "line": 122
      }
    }
  },
  "data_resources": {
    "data.ibm_container_cluster_config.cluster_config": {
      "mode": "data",
      "type": "ibm_container_cluster_config",
      "name": "cluster_config",
      "attributes": {
        "cluster_name_id": "cluster_id",
        "resource_group_id": "cluster_resource_group_id"
      },
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "main.tf",
        "line": 11
      }
    },
    "data.ibm_container_vpc_cluster.cluster": {
      "mode": "data",
      "type": "ibm_container_vpc_cluster",
      "name": "cluster",
      "attributes": {
        "name": "cluster_id",
        "resource_group_id": "cluster_resource_group_id"
      },
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "main.tf",
        "line": 6
      }
    },
    "data.ibm_resource_instance.log_analysis_instance": {
      "mode": "data",
      "type": "ibm_resource_instance",
      "name": "log_analysis_instance",
      "attributes": {
        "count": "log_analysis_enabled",
        "depends_on": "log_analysis_ingestion_key",
        "name": "log_analysis_instance_name"
      },
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "main.tf",
        "line": 27
      }
    },
    "data.ibm_resource_instance.cloud_monitoring_instance": {
      "mode": "data",
      "type": "ibm_resource_instance",
      "name": "cloud_monitoring_instance",
      "attributes": {
        "count": "cloud_monitoring_enabled",
        "depends_on": "cloud_monitoring_access_key",
        "name": "cloud_monitoring_instance_name"
      },
      "provider": {
        "name": "ibm"
      },
      "pos": {
        "filename": "main.tf",
        "line": 35
      }
    }
  },
  "module_calls": {}
}
